<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>URQ Language Documentation</title>
    <link href="../vendor/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<style>
    .container {
        margin-top: 20px;
        margin-bottom: 100px;
    }
    
    p {
        margin-left: 40px;
        text-indent: -20px;
        max-width: 800px;
    }
    
    code {
        display: inline-block;
        margin: 5px 0 20px 40px;
    }
    
    ul, ol {
        margin-left: 40px;
    }
</style>

<div class="container">

<div>
    <h3>Содержание</h3>
    <p><a href="#пояснение к доке">Пояснения к доке</a></p>
    <p><a href="#системные конструкции">Системные конструкции</a></p>
    <p><a href="#системные переменные">Системные переменные</a></p>
    <p><a href="#комментарии">Комментарии</a></p>
    <p><a href="#операторы">Операторы</a></p>
    <p><a href="#математические и логические операторы">Математические и логические операторы</a></p>
    <p><a href="#режимы urq_mode">Режимы urq_mode</a></p>
    <p><a href="#примеры">Примеры</a></p>
</div>

<div id="пояснение к доке">
    <h3>Пояснения к доке</h3>
    <p>скобки [] - обязательный параметр</p>
    <p>скобки {} -  не обязательный параметр</p>
</div>

<div id="системные конструкции">
    <h3>Системные конструкции:</h3>
    <p><mark>#[переменная]$</mark> - вывод переменной</p>
    <p><mark>#%[переменная]$</mark> - вывод переменной</p>
        <code>
            яблок <mark>=</mark> 4 <br>
            pln у меня <mark>#яблок$</mark> яблока! <br>
            <span class="text-muted">/* выведет на экран <br>
            "у меня <mark>4</mark> яблока"! */</span>
        </code>
    <p><mark>##[код символа]$</mark> - вывод экранированого символа. Экранированный символ пригоден только для вывода на экран, он не 
        может быть частью оператора. Например <mark>##59$</mark> то экранированный символ "<mark>;</mark>" в режиме dosurq и ripurq не будет считаться комментарием 
        можно использовать <mark>##44$</mark> (экранированный символ "<mark>,</mark>") чтобы вывести строку с запятой в операторе <mark>btn</mark></p>

    <p><mark>#/$</mark> - заменяется на перенос строки</p>
    <p><mark>#%/$</mark> - заменяется на перенос строки</p>
    <p><mark>#$</mark> - заменяется на пробел</p>
    <p><mark>#%$</mark> - заменяется на пробел</p>
</div>


<div id="системные переменные">
    <h3>Системные переменные</h3>
    <p><mark>urq_mode</mark> - флаг, указывающий на особенности в проигрывании данного квеста (подробности ниже) нужен  
        для проигрывания старых квестов, написанных под другие интерпретаторы</p>
    <p><mark>count_[локация]</mark> - счетчик заходов на локацию, меняется от операторов <mark>btn</mark>, <mark>proc</mark>, <mark>goto</mark></p>
    <p><mark>music</mark> - если присвоить этой переменной файл с музыкой, то она начнёт проигрываться и будет повторяться по окончанию</p>
    <p><mark>common</mark> - изменение этой переменной приведёт к тому, что оператор <mark>btn</mark> станет вызывать локацию не <mark>:common</mark>, а 
        <mark>:common_{значение}</mark> при переходах</p>
    <p><mark>current_loc</mark> - название текущей локации. Меняется только при btn переходах</p>
    <p><mark>previous_loc</mark> - название предыдущей локации. Меняется только при btn переходах</p>
    <p><mark>style_dos_textcolor</mark> - число от 0 до 15. Меняет цвет текста на дос-цвета.</p>
    <p><mark>style_textcolor</mark> - меняет текста на указанный (в десятичном формате или шестнатиричном с префиксом #)</p>
    <p><mark>style_backcolor</mark> - меняет цвет фона (в десятичном формате или шестнатиричном с префиксом #)</p>
        <code>style_backcolor = "#000" <span class="text-muted">/* цвет фона теперь черный */</span></code>
    <p><mark>image</mark> - выводит указанную картинку на экран</p>
    <p><mark>inv_[предмет]</mark> - возвращает количество [предмета] в инвентаре. Если присвоить этой переменной числовое значение, 
        то количество предметов в инвентаре станет равным этому значению.</p>
        <code>            
            <mark>inv_Яблоко</mark> = 4<br>
            if <mark>inv_Яблоко</mark> > 0 then pln у меня есть как минимум одно яблоко!
        </code>
    <p><mark>[предмет]</mark> - возвращает количество [предмета] в инвентаре</p>
        <code>
            mark 4, Яблоко<br>
            if <mark>яблоко</mark> then pln у меня есть как минимум одно яблоко!
        </code>
</div>

<div id="комментарии">
    <h3>Комментарии</h3>
<code>
    <span class="text-muted">/*<br>
       это комментарий<br>
    */</span>
</code>    
</div>

<div id="операторы">
<h3>Операторы</h3>
    <p><mark>:[метка]</mark> - метка, на которую можно перейти с помощью операторов <mark>goto</mark>, <mark>proc</mark>, <mark>btn</mark></p>
    <p><mark>if</mark> [условие] <mark>then</mark> [тогда] {<mark>else</mark> [иначе]} - оператор условия</p>
        <code>
            inv_яблок = 0 <br>
            <mark>if</mark> Яблок > 4 <mark>then</mark> pln у меня много яблок! <mark>else</mark> pln У меня мало яблок <br>
            <span class="text-muted">/* Выведет "У меня мало яблок", т.к. сработало <mark>else</mark> */</span>
        </code>
    </p>
    <p><mark>music [файл]</mark> - проигрывает указанный файл один раз, останавливает предыдущий играющий файл вызванный через <mark>music</mark></p>
    <p><mark>play [файл]</mark> - проигрывает указанный файл один раз</p>
    <p><mark>cls</mark> - принудительно очищает экран от текста и кнопок</p> 
    <p><mark>proc [метка]</mark> - 
        переход на указанную локацию и выполнение квеста до оператора <mark>end</mark>, после чего возврат на изначальную позицию
        (увеличит счетчик заходов на локацию, переменная <mark>count_[метка]</mark>)</p>    
    <p><mark>forget_proc</mark> - 
        "забыть" о переходе через <mark>proc</mark>, возврата при встрече <mark>end</mark> не будет</p>
    <p><mark>end</mark> - 
        оператор окончания выполнения. Управление отдаётся игроку, он может нажать на кнопки, использовать инвентарь, и вообще</p>
    <p><mark>anykey {переменная}</mark> - 
        просит игрока нажать на любую клавишу или щелкнуть мышкой. После этого выполнение квеста продолжится
        если указана "переменная", то код нажатой клавиши запишется в эту переменную</p>
    <p><mark>pause [время в милисекундах]</mark>
        оператор прерывает выполнение квеста на указанное количество милисекунд
        важно: в это время игра не заблокирована, игрок может использовать инвентарь и нажимать на <mark>btn</mark>-кнопки (если есть)
        Если игрок что-то сделал, то пауза прерывается.</p>
    <p><mark>input [переменная]</mark> - 
        оператор заставляет игрока ввести что-нибудь с клавиатуры. Введенная строка попадает в переданную переменную </p>
    <p><mark>quit</mark> - 
        конец квеста. Больше делать ничего нельзя. Никак.</p>
    <p><mark>invkill {Предмет}</mark> - 
        Если передмет указан, то обнуляет количество этого предмета у игрока (станет 0). Если предмет не указан, то
        обнуляет инвентарь игрока (все предметы исчезнут)</p>
    <p><mark>perkill</mark> - 
        Обнуляет переменные, в том числе и системные (кроме urq_mode). Не используйте без крайней необходимости.</p>
    <p><mark>inv+ {Количество,} Предмет</mark> - 
        добавляет в инвентарь игроку указанное количество предметов (или один)</p>
    <p><mark>inv- {Количество,} Предмет</mark> - 
        Отнимает у игрока указанное количество предметов (или один)</p>
    <p><mark>goto [метка]</mark> - 
        переход на указанную метку (увеличит счетчик заходов на локацию, переменная count_[метка])</p>
    <p><mark>p {текст}</mark> или <mark>print {текст}</mark> - 
        выводит указанный текст на экран</p>
    <p><mark>pln {текст}</mark> или <mark>println {текст}</mark> - 
        выводит указанный текст на экран и переносит строку</p>
    <p><mark>btn [метка], {текст перехода}</mark>
        нарисует кнопку с указанным текстом. При нажатии игроком на неё, совершится переход на указанную метку (подробнее ниже)</p>
    <p><mark>btn [оператор {& оператор & оператор...}], {текст перехода}</mark>
        нарисует кнопку с указанным текстом. При нажатии игроком на неё, выполнятся указанные операторы (подробнее ниже)</p>
</div>
    
<div id="математические и логические операторы">
    
</div>

<h3>Математические и логические операторы в порядке убывания приоритета</h3>
    
    <p><mark>(</mark></p>
    <p><mark>)</mark></p>
    <p><mark>not</mark></p>
    <p><mark>*</mark></p>
    <p><mark>/</mark></p>
    <p><mark>+</mark></p>
    <p><mark>-</mark></p>
    <p><mark><</mark></p>
    <p><mark><=</mark></p>
    <p><mark>></mark></p>
    <p><mark>>=</mark></p>
    <p><mark>=</mark></p>
    <p><mark>==</mark></p>
    <p><mark>!=</mark></p>
    <p><mark><></mark></p>
    <p><mark>&&</mark></p>
    <p><mark>and</mark></p>
    <p><mark>||</mark></p>
    <p><mark>or</mark></p>

<div id="режимы urq_mode">
<h3>Режимы urq_mode</h3>
    <h5><mark>urq_mode="ripurq"</mark></h5>
        <p>; - комментарий</p>
        <p>системные переменные вида count_метка теперь выглядят как просто "метка", т.е. count_ опускается</p>
        <p>очищаются кнопки при переходе goto</p>
    <h5><mark>urq_mode="dosurq"</mark></h5>
        <p>меняет цвет фона и кнопок на черный</p>
        <p>; - комментарий</p>
</div>

<div id="примеры">
<h3>Примеры</h3>

<p><mark>btn</mark></p>
    <code>btn location, текст перехода <span class="text-muted">/* кнопка перехода на метку location */</span></code>

    <p>Произойдёт следующее (если метка существует):</p>
    <ol>
        <li>очистится экран и все кнопки</li>
        <li>вызовется метка <mark>:common</mark> или <mark>:common_[значение переменной commom]</mark></li>
        <li>изменятся системные переменные <mark>previous_loc</mark> и <mark>current_loc</mark></li>
        <li>переменная <mark>count_location</mark> увеличится на 1</li>
        <li>совершится переход на локацию <mark>location</mark></li>
    </ol>
        

<p><mark>xbtn</mark></p>
    <code>btn a=a+1 & goto location, текст перехода <span class="text-muted">/* кнопка инкремент переменной "a" и переход на location */</span><br>
    btn goto location, текст перехода <span class="text-muted">/* кнопка инкремент переменной "a" и переход на location */</span></code>
</div>

</div>
</body>
</html>
